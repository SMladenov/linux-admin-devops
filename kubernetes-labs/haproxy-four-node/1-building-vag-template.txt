Installing Debian 12*
su - root
apt install sudo -y
useradd -m vagrant && passwd vagrant
usermod -aG sudo vagrant
sudo apt upgrade -y
sudo apt install -y build-essential dkms linux-headers-$(uname -r) tar bzip2 wget libelf-dev
#Mount VBox Additional
sudo mount /dev/sr0 /mnt
sudo /mnt/VBoxLinuxAdditions.run

echo 'export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin:$PATH' >> ~/.profile
source ~/.profile
. ~/.profile
sudo usermod -s /bin/bash vagrant

sudo usermod -aG vboxsf vagrant
sudo nano /etc/default/grub
sudo update-grub

echo "vagrant ALL=(ALL) NOPASSWD:ALL" | sudo tee -a /etc/sudoers.d/vagrant

#As Vagrant User
mkdir -m 0700 -p /home/vagrant/.ssh
wget --no-check-certificate \
  https://raw.github.com/mitchellh/vagrant/master/keys/vagrant.pub \
  -O /home/vagrant/.ssh/authorized_keys

chmod 0600 /home/vagrant/.ssh/authorized_keys

sudo apt clean

sudo dd if=/dev/zero of=/EMPTY bs=1M status=progress
sudo rm -f /EMPTY
sudo reboot
#Unmount the Disk from the Rom
sudo poweroff

vagrant package --base VagrantBoxDebian --output debian12.box

vagrant box list
vagrant box add VagrantBoxDebian debian12.box

vagrant box list
VagrantBoxAL            (virtualbox, 0)
VagrantBoxDebian        (virtualbox, 0)
shekeriev/almalinux-9.6 (virtualbox, 0.1, (amd64))

#Now i need to test it
mkdir test-debian12 && cd test-debian12
vagrant init VagrantBoxDebian
vagrant up
vagrant ssh

exit
vagrant halt
vagrant status
vagrant destroy --force

